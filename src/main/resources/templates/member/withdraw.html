<!-- member/withdraw.html -->
<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/fragments/base}">
<head>
    <title th:with="title='회원 탈퇴'">회원 탈퇴</title>
</head>
<body>
<div layout:fragment="content">
    <main class="board-container">

        <section class="auth-card-wrap">
            <div class="auth-card-body">

                <h2 style="font-size:1.3rem; margin-bottom:12px;">회원 탈퇴</h2>

                <!-- 기본 정보 영역 -->
                <section style="margin-top:4px; padding:12px; border:1px solid #e3e5e8; background:#fafbfc;">
                    <p style="margin:0 0 6px 0; color:#333;">
                        <strong th:text="${member.displayName}">nickname</strong>
                        (<span th:text="${member.username}">username</span>) 님 안녕하세요.
                    </p>
                    <p style="margin:0; font-size:0.9rem; color:#666;">
                        아래 탈퇴 안내를 모두 확인하신 후, 인증번호와 체크박스를 완료하면 회원탈퇴가 진행됩니다.
                    </p>
                </section>

                <!-- 탈퇴 안내 영역 -->
                <section style="margin-top:16px;">
                    <h3 style="margin:0 0 8px 0; font-size:1.05rem;">탈퇴 시 삭제/유지되는 정보</h3>
                    <ul style="margin:0; padding-left:18px; color:#444; font-size:0.95rem; line-height:1.55;">
                        <li>회원님의 <strong>회원 정보(아이디, 닉네임, 이메일)</strong>가 삭제됩니다.</li>
                        <li>회원님이 작성한 <strong>게시글과 댓글</strong>이 함께 삭제됩니다.</li>
                        <li>이미 법적 보관이 필요한 데이터(예: 결제/정산 기록 등)는 관련 법령에 따라 별도 보관될 수 있습니다.</li>
                    </ul>

                    <p style="margin:10px 0 0 0; color:#d62828; font-size:0.92rem;">
                        탈퇴 후에는 삭제된 정보(게시글, 댓글, 회원 정보)를 복구할 수 없습니다.
                    </p>
                </section>

                <!-- 동의 체크 -->
                <section style="margin-top:14px;">
                    <label style="display:flex; align-items:center; gap:8px; font-size:0.95rem; color:#333;">
                        <input type="checkbox" id="withdrawConfirmCheckbox">
                        위 내용을 모두 확인했으며, 회원탈퇴에 동의합니다.
                    </label>
                </section>

                <!-- 이메일 인증 -->
                <section style="margin-top:16px;">
                    <p style="margin:0 0 8px 0; color:#444; font-size:0.95rem;">
                        회원님의 이메일 : <strong th:text="${member.email}">email</strong><br>
                        이메일로 전송된 인증번호를 입력하신 후, 동의 체크박스를 선택하면 회원탈퇴를 진행할 수 있습니다.
                    </p>
                    <p style="margin:0 0 10px 0; color:#666; font-size:0.9rem;">
                        인증번호는 발급 후 5분간 유효하며, 시간이 지나면 자동으로 만료됩니다.
                    </p>

                    <div style="display:flex; gap:10px; align-items:flex-end; flex-wrap:wrap;">
                        <div style="display:flex; flex-direction:column; gap:6px;">
                            <label for="withdrawCodeInput" style="font-weight:700; font-size:0.95rem;">인증번호</label>
                            <input id="withdrawCodeInput"
                                   type="text"
                                   inputmode="numeric"
                                   maxlength="6"
                                   style="width:220px; padding:10px 12px; border:1px solid #d6d9dd; border-radius:6px;">
                        </div>

                        <button type="button"
                                id="sendWithdrawCodeBtn"
                                class="btn btn-primary"
                                style="height:40px;">
                            인증번호 받기
                        </button>

                        <button type="button"
                                id="withdrawBtnBottom"
                                class="btn btn-danger"
                                style="height:40px;"
                                disabled>
                            회원탈퇴 하기
                        </button>
                    </div>

                    <div id="withdrawTimer" style="margin-top:8px; color:#666; font-size:0.9rem; display:none;"></div>
                    <div id="withdrawMessage" class="msg ok" style="display:none; margin-top:6px;"></div>
                    <div id="withdrawError" class="msg err" style="display:none; margin-top:6px;"></div>
                </section>

            </div>
        </section>

        <!-- 공통 이메일 코드 유틸 + 탈퇴 스크립트 -->
        <script th:src="@{/js/emailcodeUtil.js}"></script>
        <script th:src="@{/js/withdraw.js}"></script>

    </main>
</div>
</body>
</html>
