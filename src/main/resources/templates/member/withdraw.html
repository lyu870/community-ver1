<!-- member/withdraw.html -->
<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/fragments/base}">
<head>
    <title th:with="title='회원 탈퇴'">회원 탈퇴</title>
</head>
<body>
<div layout:fragment="content">
    <main class="board-container">

        <section class="auth-card-wrap">
            <div class="auth-card-body">

                <h2 style="font-size:1.3rem; margin-bottom:12px;">회원 탈퇴</h2>

                <!-- 기본 정보 영역 -->
                <section style="margin-top:4px; padding:12px; border:1px solid #e3e5e8; background:#fafbfc;">
                    <p style="margin:0 0 6px 0; color:#333;">
                        <strong th:text="${member.displayName}">nickname</strong>
                        (<span th:text="${member.username}">username</span>) 님 안녕하세요.
                    </p>
                    <p class="text-sm" style="margin:0; color:#666;">
                        아래 탈퇴 안내를 모두 확인하신 후, 인증번호와 체크박스를 완료하면 회원탈퇴가 진행됩니다.
                    </p>
                </section>

                <!-- 탈퇴 안내 영역 -->
                <section style="margin-top:16px;">
                    <h3>탈퇴 시 삭제/유지되는 정보</h3>
                    <ul class="text-sm" style="margin-top:8px; padding-left:18px; color:#444;">
                        <li>회원님의 <strong>회원 정보(아이디, 닉네임, 이메일)</strong>가 삭제됩니다.</li>
                        <li>회원님이 작성한 <strong>게시글과 댓글</strong>이 함께 삭제됩니다.</li>
                        <li>이미 법적 보관이 필요한 데이터(예: 결제/정산 기록 등)는 관련 법령에 따라 별도 보관될 수 있습니다.</li>
                    </ul>

                    <div class="text-sm" style="margin-top:10px; color:#d93025;">
                        탈퇴 후에는 삭제된 정보(게시글, 댓글, 회원 정보)를 복구할 수 없습니다.
                    </div>

                    <!-- 확인 체크박스 영역 -->
                    <div class="mt-14">
                        <label class="text-sm" style="color:#333;">
                            <input type="checkbox" id="withdrawConfirmCheckbox">
                            위 내용을 모두 확인했으며, 회원탈퇴에 동의합니다.
                        </label>
                    </div>
                </section>

                <!-- 회원 탈퇴 영역 -->
                <section id="withdrawSection" style="margin-top:24px;">

                    <!-- 이메일/유효시간 안내 영역 -->
                    <p class="text-sm" style="color:#555; margin-bottom:4px;">
                        회원님의 이메일 :
                        <strong th:text="${member.email}">user@example.com</strong>
                    </p>

                    <p class="text-sm" style="color:#555; margin:0 0 4px 0;">
                        이메일로 전송된 인증번호를 입력하신 후, 동의 체크박스를 선택하면 회원탈퇴를 진행할 수 있습니다.
                    </p>

                    <p class="text-xs" style="color:#777; margin:0;">
                        인증번호는 발급 후 <strong>5분간</strong> 유효하며, 시간이 지나면 자동으로 만료됩니다.
                    </p>

                    <!-- 회원 탈퇴 인증번호 입력/요청 영역 -->
                    <div style="margin-top:8px; max-width:320px;">
                        <label class="text-sm">
                            인증번호
                            <input type="text"
                                   id="withdrawCodeInput"
                                   placeholder="인증번호 6자리"
                                   maxlength="6"
                                   class="auth-input"
                                   style="max-width:200px;">
                        </label>
                        <div class="flex-row gap-8 mt-8">
                            <button type="button"
                                    id="sendWithdrawCodeBtn"
                                    class="auth-btn-inline-primary">
                                인증번호 받기
                            </button>
                            <button type="button"
                                    id="withdrawBtnBottom"
                                    class="auth-btn-primary"
                                    style="flex:1; background:#d93025; border-color:#d93025; padding:6px 12px; cursor:pointer;"
                                    disabled>
                                회원탈퇴 하기
                            </button>
                        </div>

                        <!-- 인증번호 타이머 영역 -->
                        <div id="withdrawTimer" class="msg text-xs" style="display:none;"></div>
                    </div>

                    <div id="withdrawMessage" class="msg ok" style="display:none; margin-top:6px;"></div>
                    <div id="withdrawError" class="msg err" style="display:none; margin-top:6px;"></div>
                </section>

            </div>
        </section>

        <!-- 공통 이메일 코드 유틸 + 탈퇴 스크립트 -->
        <script th:src="@{/js/emailCodeUtil.js}"></script>
        <script th:src="@{/js/withdraw.js}"></script>

    </main>
</div>
</body>
</html>
