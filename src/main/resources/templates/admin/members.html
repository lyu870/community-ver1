<!-- templates/admin/members.html -->
<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/fragments/base}">

<body>
<div layout:fragment="content">

    <main class="admin-container">

        <h2>회원 목록</h2>

        <table class="board-table">
            <thead>
            <tr>
                <th>ID</th>
                <th>아이디</th>
                <th>닉네임</th>
                <th>이메일</th>
                <th>가입일</th>
                <th>게시글</th>
                <th>댓글</th>
            </tr>
            </thead>

            <tbody>
            <tr th:each="m : ${items}">
                <td th:text="${m.id}">1</td>
                <td th:text="${m.username}">user</td>
                <td th:text="${m.displayName}">닉네임</td>
                <td th:text="${m.email}">test@test.com</td>
                <td th:text="${m.createdAt != null ? #temporals.format(m.createdAt, 'yyyy-MM-dd') : '-'}">2025-01-01</td>

                <td>
                    <a th:href="@{|/admin/member/${m.id}/posts|}"
                       class="btn btn-ghost btn-sm admin-link-btn">작성한 게시글</a>
                </td>

                <td>
                    <a th:href="@{|/admin/member/${m.id}/comments|}"
                       class="btn btn-ghost btn-sm admin-link-btn">작성한 댓글</a>
                </td>
            </tr>
            </tbody>
        </table>

        <!-- 페이지네이션 -->
        <nav class="pagination">
            <span th:if="${current > 1}">
                <a th:href="@{|/admin/members?page=1|}">첫페이지</a>
                <a th:href="@{|/admin/members?page=${current-1}|}">이전</a>
            </span>

            <span th:each="p : ${#numbers.sequence(startPage, endPage)}">
                <a th:if="${p != current}" th:href="@{|/admin/members?page=${p}|}"
                   th:text="${p}"></a>

                <strong th:if="${p == current}" th:text="${p}"></strong>
            </span>

            <span th:if="${current < totalPages}">
                <a th:href="@{|/admin/members?page=${current+1}|}">다음</a>
                <a th:href="@{|/admin/members?page=${totalPages}|}">마지막페이지</a>
            </span>
        </nav>

    </main>

</div>
</body>
</html>
